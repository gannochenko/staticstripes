<!--
# Legend:

1. sequences are vertically stacked containers, can be used to define parallel sequences
2. fragments are horizontally stacked containers, define the chunk
3. container is a piece of rich html that will be rendered using puppeteer into a png against the output's resolution
-->

<project>
  <sequence>
    <fragment class="intro_image" />
    <fragment class="clip_1" />
    <fragment class="glitch" />
    <fragment class="clip_2" />
    <fragment class="outro_image" id="ending_screen" />
  </sequence>
  <sequence>
    <fragment class="intro_sound" />
  </sequence>
  <sequence>
    <fragment class="outro_sound" />
  </sequence>
</project>

<style>
  :root {
    --primary-color: #3498db;
    --spacing: 20px;
    --font-size: 16px;
  }

  .intro_image {
    -asset: intro_image;
    -duration: 4000ms;
    -transition-end: fade-out 500ms;
  }
  .clip_1 {
    -asset: clip_01;
    -duration: auto; /* auto means the duration takes 100% of the asset length minus -trim-left */
    -offset-start: 3000ms;
    -transition-start: fade-in 1000ms;
    -object-fit: contain ambient 25 -0.1 0.7;
  }
  .clip_2 {
    -asset: clip_02;
    -duration: 3000ms;
  }
  .outro_image {
    -asset: intro_image;
    -duration: 4000ms;
    -transition-end: fade-out 500ms;
  }
  .glitch {
    -asset: glitch;
    -duration: 500ms;
    -transition-end: fade-out 1000ms;
    -offset-start: -250ms;
    -overlay-start-z-index: 1;
    -offset-end: -250ms;
    -overlay-end-z-index: 1;
    -chromakey: smooth strict #000000;
  }
  .intro_sound {
    -asset: guitar_music;
    -duration: 4000ms;
    -transition-end: fade-out 500ms;
  }
  .outro_sound {
    -asset: guitar_music;
    -duration: 4000ms;
    -offset-start: calc(url(#main.time.end) + 5s);
    -transition-end: fade-out 500ms;
  }
</style>

<assets>
  <asset
    data-name="clip_01"
    data-path="./input/20251224_110901.mp4"
    data-author="John Doe"
  />
  <asset
    data-name="clip_02"
    data-path="./input/20251224_111721.mp4"
    data-author="Jane Doe"
  />
  <asset
    data-name="intro_image"
    data-path="./images/20251224_110757.jpg"
    data-author="FooBar"
  />
  <asset data-name="glitch" data-path="./effects/digital_glitch_01.mp4" />
  <asset
    data-name="guitar_music"
    data-path="./audio/instrumental-acoustic-guitar-music-401434.mp3"
    data-author="Baz"
  />
</assets>

<outputs>
  <output
    name="for_youtube"
    path="./output/for_youtube.mp4"
    resolution="1920x1080"
    fps="30"
  />
</outputs>
